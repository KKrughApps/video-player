<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.4">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;html&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>.vjs-language-menu, .vjs-playlist-nav { display: inline-block; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.video-js { max-width: 100%; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>.vjs-playlist-nav button { font-size: 18px; padding: 5px 10px; cursor: pointer; }</p>
<p class="p1"><span class="Apple-converted-space">        </span>video { pointer-events: none; } /* Disable right-click */</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="vjs-video-container"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;video id="videoPlayer" class="video-js vjs-default-skin" controls width="600" height="340"&gt;&lt;/video&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://vjs.zencdn.net/8.10.0/video.min.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const player = videojs('videoPlayer', {</p>
<p class="p1"><span class="Apple-converted-space">            </span>fluid: true,</p>
<p class="p1"><span class="Apple-converted-space">            </span>controlBar: {</p>
<p class="p1"><span class="Apple-converted-space">                </span>children: ['playToggle', 'volumePanel', 'progressControl', 'captionsButton', 'fullscreenToggle']</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>let audioElement = new Audio();</p>
<p class="p1"><span class="Apple-converted-space">        </span>let currentVideoIndex = 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>let currentLang = 'en'; // Default language</p>
<p class="p1"><span class="Apple-converted-space">        </span>let videos = [];</p>
<p class="p1"><span class="Apple-converted-space">        </span>let baseDuration = 140;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>player.on('play', () =&gt; audioElement.play());</p>
<p class="p1"><span class="Apple-converted-space">        </span>player.on('pause', () =&gt; audioElement.pause());</p>
<p class="p1"><span class="Apple-converted-space">        </span>player.on('seeking', () =&gt; audioElement.currentTime = player.currentTime() - 3); // 3s offset</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Language Menu</p>
<p class="p1"><span class="Apple-converted-space">        </span>videojs.registerComponent('LanguageMenu', videojs.extend(videojs.getComponent('MenuButton'), {</p>
<p class="p1"><span class="Apple-converted-space">            </span>constructor: function() { this.addClass('vjs-language-menu'); },</p>
<p class="p1"><span class="Apple-converted-space">            </span>createMenu: function() {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const menu = new videojs.Menu(this.player_, { menuButton: this });</p>
<p class="p1"><span class="Apple-converted-space">                </span>videos[currentVideoIndex].languages.forEach((lang, index) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const item = new videojs.MenuItem(this.player_, {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>label: lang.label,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>selectable: true,</p>
<p class="p1"><span class="Apple-converted-space">                        </span>selected: lang.code === currentLang</p>
<p class="p1"><span class="Apple-converted-space">                    </span>});</p>
<p class="p1"><span class="Apple-converted-space">                    </span>item.on('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>currentLang = lang.code;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>audioElement.src = lang.audio;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>audioElement.load();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (!player.paused()) audioElement.play();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>player.playbackRate(baseDuration / lang.duration);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>player.currentTime(3); // Start at 0:03</p>
<p class="p1"><span class="Apple-converted-space">                    </span>});</p>
<p class="p1"><span class="Apple-converted-space">                    </span>menu.addItem(item);</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">                </span>return menu;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}));</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Fetch videos and initialize</p>
<p class="p1"><span class="Apple-converted-space">        </span>fetch('https://video-api.keith-9d4.workers.dev')</p>
<p class="p1"><span class="Apple-converted-space">            </span>.then(res =&gt; res.json())</p>
<p class="p1"><span class="Apple-converted-space">            </span>.then(data =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>videos = data.videos;</p>
<p class="p1"><span class="Apple-converted-space">                </span>player.src(videos[0].video);</p>
<p class="p1"><span class="Apple-converted-space">                </span>audioElement.src = videos[0].languages[0].audio;</p>
<p class="p1"><span class="Apple-converted-space">                </span>baseDuration = videos[0].baseDuration;</p>
<p class="p1"><span class="Apple-converted-space">                </span>player.playbackRate(baseDuration / videos[0].languages[0].duration);</p>
<p class="p1"><span class="Apple-converted-space">                </span>player.currentTime(3);</p>
<p class="p1"><span class="Apple-converted-space">                </span>player.controlBar.addChild('LanguageMenu', {});</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Disable right-click on video</p>
<p class="p1"><span class="Apple-converted-space">        </span>document.getElementById('videoPlayer').addEventListener('contextmenu', (e) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>e.preventDefault();</p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
